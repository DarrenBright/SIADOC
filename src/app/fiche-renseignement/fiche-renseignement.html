<!-- ONGLETs -->
<div class="fiche-tabs">
  <button (click)="setSection('controle')" [class.active]="activeSection === 'controle'">
    Contr√¥le
  </button>
  <button (click)="setSection('identite')" [class.active]="activeSection === 'identite'">
    Identit√©
  </button>
  <button (click)="setSection('filiation')" [class.active]="activeSection === 'filiation'">
    Filiation
  </button>
  <button (click)="setSection('identite-piece')" 
        [class.active]="activeSection === 'identite-piece'">
    Pi√®ce d‚Äôidentit√©
  </button>
  <button (click)="setSection('contact')" 
        [class.active]="activeSection === 'contact'">
    Adresse & Contacts
  </button>
    <button (click)="setSection('complementaire')" 
        [class.active]="activeSection === 'complementaire'">
    Renseignements compl√©mentaires
  </button>
  <button (click)="setSection('apercu')" 
        [class.active]="activeSection === 'apercu'">
    Aper√ßu de la fiche
  </button>


</div>

<div class="page-container">
  <div class="card">
    <h2>Fiche de renseignement du candidat</h2>

    <!-- ================= SECTION 1 : CONTR√îLE ================= -->
    <section class="fiche-section" *ngIf="activeSection === 'controle'">
      <h3>Contr√¥le</h3>

      <div class="form-group">
        <label>Photo</label>
        <input type="file" (change)="onPhotoSelected($event)">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Agent contr√¥leur</label>
          <input type="text" [(ngModel)]="fiche.agentControle">
        </div>

        <div class="form-group">
          <label>Date du contr√¥le</label>
          <input type="date" [(ngModel)]="fiche.dateControle">
        </div>
      </div>
    </section>

    <!-- ================= SECTION 2 : IDENTIT√â ================= -->
    <section class="fiche-section" *ngIf="activeSection === 'identite'">
      <h3>Identit√© du candidat</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Nom</label>
          <input type="text" [(ngModel)]="fiche.nom">
        </div>

        <div class="form-group">
          <label>Pr√©noms</label>
          <input type="text" [(ngModel)]="fiche.prenoms">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Sexe</label>
          <select [(ngModel)]="fiche.sexe">
            <option value="">‚Äî S√©lectionner ‚Äî</option>
            <option value="M">Masculin</option>
            <option value="F">F√©minin</option>
          </select>
        </div>

        <div class="form-group">
          <label>Date de naissance</label>
          <input type="date" [(ngModel)]="fiche.dateNaissance">
        </div>
      </div>

      <h4>Description physique</h4>

      <div class="form-row">
        <div class="form-group">
          <label>Taille (cm)</label>
          <input type="number" [(ngModel)]="fiche.taille">
        </div>

        <div class="form-group">
          <label>Poids (kg)</label>
          <input type="number" [(ngModel)]="fiche.poids">
        </div>
      </div>
    </section>

    <!-- ================= SECTION 3 : FILIATION ================= -->
    <section class="fiche-section" *ngIf="activeSection === 'filiation'">
      <h3>Filiation</h3>

      <h4>P√®re</h4>
      <div class="form-row">
        <div class="form-group">
          <label>Nom et pr√©noms</label>
          <input type="text" [(ngModel)]="fiche.nomPere">
        </div>

        <div class="form-group">
          <label>Profession</label>
          <input type="text" [(ngModel)]="fiche.professionPere">
        </div>
      </div>

      <h4>M√®re</h4>
      <div class="form-row">
        <div class="form-group">
          <label>Nom et pr√©noms</label>
          <input type="text" [(ngModel)]="fiche.nomMere">
        </div>

        <div class="form-group">
          <label>Profession</label>
          <input type="text" [(ngModel)]="fiche.professionMere">
        </div>
      </div>
    </section>
    <!-- ================= SECTION 6 : PI√àCES D‚ÄôIDENTIT√â ================= -->
    <section class="fiche-section" *ngIf="activeSection === 'identite-piece'">
      <h3>Pi√®ce d‚Äôidentit√©</h3>

      <!-- Type de pi√®ce -->
      <div class="form-row">
        <div class="form-group">
          <label>Type de pi√®ce</label>
          <select [(ngModel)]="fiche.typePieceIdentite">
            <option value="">‚Äî S√©lectionner ‚Äî</option>
            <option value="CNI">Carte Nationale d‚ÄôIdentit√© (CNI)</option>
            <option value="PASSEPORT">Passeport</option>
          </select>
        </div>
      </div>

<!-- ================= SECTION 6 : PI√àCE D‚ÄôIDENTIT√â ================= -->
    <div>
      <h3>Pi√®ce d‚Äôidentit√© (CNI)</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Num√©ro de la CNI</label>
          <input type="text" [(ngModel)]="fiche.numeroPiece">
        </div>

        <div class="form-group">
          <label>Lieu de d√©livrance</label>
          <input type="text" [(ngModel)]="fiche.lieuDelivrancePiece">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Date de d√©livrance</label>
          <input type="date" [(ngModel)]="fiche.dateDelivrancePiece">
        </div>

        <div class="form-group">
          <label>Date d‚Äôexpiration</label>
          <input type="date" [(ngModel)]="fiche.dateExpirationPiece">
        </div>
      </div>

      <!-- Scan -->
      <div class="form-row">
        <div class="form-group">
          <label>Scan / Photo de la CNI</label>
          <input type="file" (change)="onPieceIdentiteSelected($event)">
        </div>
      </div>

    </div>
  </section>


    <!-- ================= SECTION 7 : ADRESSE & CONTACTS ================= -->

    <section class="fiche-section" *ngIf="activeSection === 'contact'">
      <h3>Adresse & Contacts</h3>

      <h4>Adresse de r√©sidence</h4>

      <div class="form-row">
        <div class="form-group">
          <label>Adresse compl√®te</label>
          <input type="text" [(ngModel)]="fiche.adresseComplete">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Quartier</label>
          <input type="text" [(ngModel)]="fiche.quartier">
        </div>

        <div class="form-group">
          <label>Commune</label>
          <input type="text" [(ngModel)]="fiche.commune">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Ville</label>
          <input type="text" [(ngModel)]="fiche.ville">
        </div>

        <div class="form-group">
          <label>D√©partement</label>
          <input type="text" [(ngModel)]="fiche.departementResidence">
        </div>

        <div class="form-group">
          <label>R√©gion</label>
          <input type="text" [(ngModel)]="fiche.regionResidence">
        </div>
      </div>

      <h4>Contacts</h4>

      <div class="form-row">
        <div class="form-group">
          <label>T√©l√©phone principal</label>
          <input type="tel" [(ngModel)]="fiche.telephonePrincipal">
        </div>

        <div class="form-group">
          <label>T√©l√©phone secondaire</label>
          <input type="tel" [(ngModel)]="fiche.telephoneSecondaire">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="fiche.email">
        </div>
      </div>

      <h4>Contact en cas d‚Äôurgence</h4>

      <div class="form-row">
        <div class="form-group">
          <label>Nom et pr√©noms</label>
          <input type="text" [(ngModel)]="fiche.personneContactUrgence">
        </div>

        <div class="form-group">
          <label>T√©l√©phone</label>
          <input type="tel" [(ngModel)]="fiche.telephoneUrgence">
        </div>
      </div>

    </section>
    <!-- ================= RENSEIGNEMENTS COMPL√âMENTAIRES ================= -->
    <section class="fiche-section" *ngIf="activeSection === 'complementaire'">
      <h3>Renseignements compl√©mentaires</h3>

      <div class="form-row">
        <div class="form-group">
          <label>Sp√©cialit√© / Type de recrutement</label>
          <input type="text" [(ngModel)]="fiche.specialiteRecrutement">
        </div>
      </div>

      <h4>Dipl√¥me pr√©sent√©</h4>
      <div class="form-row">
        <div class="form-group">
          <label>Intitul√© du dipl√¥me</label>
          <input type="text" [(ngModel)]="fiche.diplomePresente">
        </div>

        <div class="form-group">
          <label>S√©rie</label>
          <input type="text" [(ngModel)]="fiche.serieDiplomePresente">
        </div>

        <div class="form-group">
          <label>Session</label>
          <input type="text" [(ngModel)]="fiche.sessionDiplomePresente">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Niveau d‚Äôinstruction</label>
          <input type="text" [(ngModel)]="fiche.niveauInstruction">
        </div>
      </div>

      <h4>Dipl√¥me le plus √©lev√©</h4>
      <div class="form-row">
        <div class="form-group">
          <label>Intitul√©</label>
          <input type="text" [(ngModel)]="fiche.diplomePlusEleve">
        </div>

        <div class="form-group">
          <label>S√©rie</label>
          <input type="text" [(ngModel)]="fiche.serieDiplomePlusEleve">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Option</label>
          <input type="text" [(ngModel)]="fiche.optionDiplomePlusEleve">
        </div>

        <div class="form-group">
          <label>Date de d√©livrance</label>
          <input type="date" [(ngModel)]="fiche.dateDiplomePlusEleve">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Formations compl√©mentaires</label>
          <textarea rows="3" [(ngModel)]="fiche.formationsComplementaires"></textarea>
        </div>
      </div>

      <h4>D√©claration</h4>
      <div class="form-row">
        <div class="form-group">
          <label>Fait √†</label>
          <input type="text" [(ngModel)]="fiche.lieuDeclaration">
        </div>

        <div class="form-group">
          <label>Date</label>
          <input type="date" [(ngModel)]="fiche.dateDeclaration">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Signature du candidat</label>
          <input type="text" [(ngModel)]="fiche.signatureCandidat">
        </div>
      </div>
    </section>

 <!-- ================= APER√áU DE LA FICHE ================= -->
  <section class="fiche-section apercu" *ngIf="activeSection === 'apercu'">

    <h2 style="text-align:center;">FICHE DE RENSEIGNEMENTS</h2>

    <!-- ================= CONTR√îLE ================= -->
    <div class="bloc">
      <h3>I. Contr√¥le</h3>
      <div class="ligne">
        <span><strong>Agent contr√¥leur :</strong> {{ fiche.agentControle }}</span>
        <span><strong>Date du contr√¥le :</strong> {{ fiche.dateControle }}</span>
      </div>
    </div>

    <!-- ================= IDENTIT√â ================= -->
    <div class="bloc">
      <h3>II. Identit√©</h3>

      <div class="ligne">
        <span><strong>Nom :</strong> {{ fiche.nom }}</span>
        <span><strong>Pr√©noms :</strong> {{ fiche.prenoms }}</span>
        <span><strong>Sexe :</strong> {{ fiche.sexe }}</span>
      </div>

      <div class="ligne">
        <span><strong>Date de naissance :</strong> {{ fiche.dateNaissance }}</span>
        <span><strong>Nationalit√© :</strong> {{ fiche.nationalite }}</span>
      </div>

      <div class="ligne">
        <span><strong>Taille :</strong> {{ fiche.taille }} cm</span>
        <span><strong>Poids :</strong> {{ fiche.poids }} kg</span>
      </div>
    </div>

    <!-- ================= FILIATION ================= -->
    <div class="bloc">
      <h3>III. Filiation</h3>

      <div class="ligne">
        <span><strong>P√®re :</strong> {{ fiche.nomPere }}</span>
        <span><strong>Profession :</strong> {{ fiche.professionPere }}</span>
      </div>

      <div class="ligne">
        <span><strong>M√®re :</strong> {{ fiche.nomMere }}</span>
        <span><strong>Profession :</strong> {{ fiche.professionMere }}</span>
      </div>
    </div>

    <!-- ================= ADRESSE & CONTACT ================= -->
    <div class="bloc">
      <h3>IV. Adresse & Contacts</h3>

      <div class="ligne">
        <span><strong>Adresse :</strong> {{ fiche.adresseComplete }}</span>
        <span><strong>T√©l√©phone :</strong> {{ fiche.telephonePrincipal }}</span>
      </div>

      <div class="ligne">
        <span><strong>Email :</strong> {{ fiche.email }}</span>
        <span><strong>Contact urgence :</strong> {{ fiche.personneContactUrgence }} ({{ fiche.telephoneUrgence }})</span>
      </div>
    </div>

    <!-- ================= PI√àCES D‚ÄôIDENTIT√â ================= -->
    <div class="bloc">
      <h3>V. Pi√®ce d‚Äôidentit√©</h3>

      <div class="ligne">
        <span><strong>Type :</strong> {{ fiche.typePieceIdentite }}</span>
        <span><strong>Num√©ro :</strong> {{ fiche.numeroPiece }}</span>
      </div>

      <div class="ligne">
        <span><strong>D√©livr√©e le :</strong> {{ fiche.dateDelivrancePiece }}</span>
        <span><strong>√Ä :</strong> {{ fiche.lieuDelivrancePiece }}</span>
      </div>

      <div class="ligne">
        <span><strong>Date d‚Äôexpiration :</strong> {{ fiche.dateExpirationPiece }}</span>
      </div>
    </div>

    <!-- ================= RENSEIGNEMENTS COMPL√âMENTAIRES ================= -->
    <div class="bloc">
      <h3>VI. Renseignements compl√©mentaires</h3>

      <div class="ligne">
        <span><strong>Sp√©cialit√© :</strong> {{ fiche.specialiteRecrutement }}</span>
        <span><strong>Niveau :</strong> {{ fiche.niveauInstruction }}</span>
      </div>

      <div class="ligne">
        <span><strong>Dipl√¥me pr√©sent√© :</strong> {{ fiche.diplomePresente }}</span>
        <span><strong>S√©rie :</strong> {{ fiche.serieDiplomePresente }}</span>
        <span><strong>Session :</strong> {{ fiche.sessionDiplomePresente }}</span>
      </div>

      <div class="ligne">
        <span><strong>Dipl√¥me le plus √©lev√© :</strong> {{ fiche.diplomePlusEleve }}</span>
        <span><strong>Option :</strong> {{ fiche.optionDiplomePlusEleve }}</span>
      </div>

      <div class="ligne">
        <span><strong>Formations :</strong> {{ fiche.formationsComplementaires }}</span>
      </div>

      <div class="ligne">
        <span><strong>Fait √† :</strong> {{ fiche.lieuDeclaration }}</span>
        <span><strong>Le :</strong> {{ fiche.dateDeclaration }}</span>
      </div>
    </div>

    <!-- ================= SIGNATURE ================= -->
    <div class="bloc">
      <div class="ligne">
        <span><strong>Signature du candidat :</strong> {{ fiche.signatureCandidat }}</span>
      </div>
    </div>

    <!-- ================= BOUTON IMPRIMER ================= -->
    <div style="text-align:center; margin-top:30px;">
      <button type="button" (click)="enregistrerFiche()">
        üíæ Sauvegarder la fiche
      </button>
    </div>

    <div>
      <button
        class="print-btn"
        (click)="imprimerFiche()"
        [disabled]="!validerFiche()"
      >
        üñ®Ô∏è Imprimer la fiche
      </button>

    </div>
    

  </section>






  </div>
</div>
